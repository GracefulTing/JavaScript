<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>导航滚动定时器版</title>
	<style>
		*{
			margin:0;
			padding: 0;
		}
		.nav{
			position: relative;
			width:400px;
			margin:50px auto 0;
		}
		.nav ul{
			list-style: none;
			position: relative;
			overflow: hidden;
		}
		.nav ul li{
			float:left;
		}
		.nav ul li a{
			display: block;
			width:80px;
			font-size:16px;
			color: black;
			text-decoration:none;
			text-align: center;
		}
		#slider{
			position: absolute;
			top:20px;
			width:80px;
			height:2px;
			background:red;
		}
	</style>
</head>
<body>
	<div class="nav">
		<ul>
			<li><a href="">按钮1</a></li>
			<li><a href="">按钮2</a></li>
			<li><a href="">按钮3</a></li>
			<li><a href="">按钮4</a></li>
			<li><a href="">按钮5</a></li>
		</ul>
		<div id="slider"></div>
	</div>
	<script>
		nav();
		function nav(){
			var navList=document.getElementsByTagName('a');
			var slider=document.getElementById('slider');
			var activeIndex=0;   //滑过的a标签的索引
			var navTimer=null;

			init();
			
			//鼠标事件之后,选中的项执行函数
			function selected(index){
				activeIndex=index;
			//	console.log(slider.offsetLeft);
			//	offsetLeft:相对于第一个有相对定位属性的父级的left值,如果所有父级都没有相对定位,那么left值相对于body.与style.left的区别:前者获取到计算出的值,后者获取行间样式的值.
				var start=slider.offsetLeft;  //start代表获取当前的slider的left值.
				var end=activeIndex*slider.offsetWidth;  //end代表slider运动过后的left值.
				var change=end-start;   //slider的位移
				clearInterval(navTimer);	
				navTimer=setInterval(function(){
					if(change<0){
						start-=5;
						if(start<=end){
							clearInterval(navTimer);
							navTimer=null;
						}
					}
					else{
						start+=5;
						if(start>=end){
							clearInterval(navTimer);
							navTimer=null;
						}
					}
					slider.style.left=start+'px';
				},30)
				//slider.style.left=end+'px';
			}

			//事件绑定
			function bind(){
				for(var i=0;i<navList.length;i++){
					(function(i){
						navList[i].onmouseover=function(){
							selected(i);
						}
					})(i)
				}
			}
		//	bind();
			//如何为left赋值?
			//获取当前元素的实时left进行相应+ - * /之后赋值给left,而不是直接把最终的left赋值给left.


			//初始化
			function init(){
				bind();
			}
		}
	</script>
</body>
</html>