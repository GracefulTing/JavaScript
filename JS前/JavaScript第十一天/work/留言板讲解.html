<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>留言板</title>
	<style type="text/css">
			* { padding: 0; margin: 0; font-size: 14px; }
			ul { list-style: none; }
			a,a:hover { text-decoration:none; }
			a,input,textarea { outline: none; }
			.clearfix:after { content: "."; display: block; height: 0; clear: both; visibility: hidden; }
			.clearfix { display:inline-block; }
			.clearfix { display:block; }
			
			.msg_mod { width: 500px; margin: 20px auto; }
			.msg_mod .m_box { width: 100%; padding: 10px; border: 1px #ccc solid; border-radius: 3px; background: #f4f4f4; }
			.msg_mod .m_line { margin-top: 10px; }
			.msg_mod .m_line .fl { float: left; }
			.msg_mod .m_line .fr { float: right; }
			.msg_mod .m_line .font { width: 50px; } 
			.msg_mod .m_line .input,
			.msg_mod .m_line .textarea { width: 438px; padding: 0 5px; background: #fff; border: 1px #ccc solid; border-radius: 2px; } 
			.msg_mod .m_line .font,
			.msg_mod .m_line .input { height: 30px; line-height: 30px; }
			.msg_mod .m_line .textarea { height: 120px; padding: 5px 5px; line-height: 16px; }
			.msg_mod .m_line .submit { width: 60px; height: 30px; line-height: 30px; text-align: center; border: 1px #ccc solid; border-radius: 2px; cursor: pointer; }
			
			.msg_mod .m_title { padding-top: 20px; font-size: 20px; }
			.msg_mod .m_cont { padding-top: 20px; }
			.msg_mod .m_cont ul li { padding-top: 15px; }
			.msg_mod .m_cont h3 { width: 100%; height: 30px; padding-left: 20px; line-height: 30px; background: #ccc; }
			.msg_mod .m_cont p { width: 100%; height:auto; padding-left: 20px; line-height: 60px; background: #f4f4f4; overflow: hidden;white-space: wrap}
			.msg_mod .m_cont p a { float: right; display: inline; margin-right: 20px; }
		</style>
</head>
<body>
	<div class="msg_mod">
		<div class="m_box">
			<form action="" method="">
				<div class="m_line clearfix">
					<span class="fl font">姓名:</span>
					<input type="text" value="" class="fr input" id="name">
				</div>
				<div class="m_line clearfix">
					<span class="fl font">内容:</span>
					<textarea class="fr textarea" name="" id="msg" ></textarea>
				</div>
				<div class="m_line clearfix">
					<input type="button" value="提交" class="fr submit" id="sub">
				</div>
			</form>
		</div>
		<h2 class="m_title">显示留言</h2>
		<div class="m_cont">
			<ul id="list"></ul>
		</div>
	</div>
	<script src="tween.js"></script>
	<script>
		message();
		function message(){
			var thename=document.getElementById('name');
			var msg=document.getElementById('msg');
			var submitBtn=document.getElementById('sub');
			var list=document.getElementById('list');
			var timer=null;
			var lock=false;      //设置开关

			//提交留言
			submitBtn.onclick=function(){
				if(lock){
					return;
				}
				else{
					lock=true;
					var nameVal=thename.value;
					var msgVal=msg.value;

					if(nameVal==''||msgVal==''){
						alert('不能为空');
						lock=false;
						return;
					}
					else{
						var li=document.createElement('li');
						li.innerHTML="<h3>"+nameVal+"</h3><p>"+msgVal+"<a href='#'>删除</a></p>";
						list.insertBefore(li,list.firstElementChild);
					}
					removeItem(li);

					//开始高度 0
					//最终高度 li.offsetHeight
					animation(li.offsetHeight,0,li);
				}
			}

			//删除功能
			function removeItem(obj){
				var removeBtn=obj.getElementsByTagName('a')[0];
				removeBtn.onclick=function(){
					animation(0,obj.offsetHeight,obj);
				//	list.removeChild(obj);
				}
			}

			//动画效果
			function animation(endNum,bNum,obj){
				var t=0;
				var b=bNum;
				var end=endNum;
				var c=end-b;
				var d=20;

				clearInterval(timer);
				timer=setInterval(function(){
					t++;
					if(t>=d){
						clearInterval(timer);
						if(endNum==0){
							list.removeChild(obj);
						}
						lock=false;
					}
					obj.style.height=Tween.Quad.easeIn(t,b,c,d)+"px";
				},30)
			}
		}

	</script>
</body>
</html>
	
		<!-- 伪类清除浮动
		.clearfix:after{
			content:"";
			display:block;
			clear:both;
			height:0;
		}
		.clearfix{
			zoom:1;
		}
	 	-->
		